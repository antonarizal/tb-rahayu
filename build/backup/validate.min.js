const{app:app,dialog:dialog,BrowserWindow:BrowserWindow,Menu:Menu}=require("electron"),crypto=require("crypto"),fs=require("fs"),config=require("./config"),zeroRegex=/(?:[0]{2}[:\-]){5}[0]{2}/,axios=require("axios"),OS=require("os"),{pid:pid}=require("process");let activate=document.querySelector("#activate"),loading=document.querySelector("#loading");const homedir=OS.homedir(),hostname=OS.hostname(),pId=function(){const ps=OS.cpus();let model=ps.reduce((function(m,v){return m+(""==m?"":"::")+v.model+":"+v.speed}),"");return model=crypto.createHmac("sha256",model).update(model).digest("hex"),model}(),macaddress=require("macaddress"),Store=require("electron-store"),store=new Store({configName:"user-preferences",defaults:{hostName:"127.0.0.1",windowBounds:{width:1024,height:700}}});function validLicense(license){return license.substr(0,17)}function validMachine(machineId){return machineId.substr(0,8)}const nId=function(){const ifaces=OS.networkInterfaces();var addresses=[];for(var dev in ifaces)var iface=ifaces[dev].filter((function(details){zeroRegex.test(details.mac)||addresses.push(details.mac)}));const uniAddresses=Array.from(new Set(addresses)).join();return uniAddresses}();var licenseKey=require("nodejs-license-key"),whatsapp=config.whatsapp;const Generator=require("license-key-generator"),options={type:"random",length:8,group:8,split:"-",splitStatus:!0},serial=new Generator(options);serial.get((error,serial)=>{macaddress.one((function(err,mac){let UniqMachineId=config.code+mac.replaceAll(":","").substr(0,8).toUpperCase();document.getElementById("kode").value=UniqMachineId;let userInfo,userLicense={info:{code:UniqMachineId,serial:serial},prodCode:"LEN100120",osType:"WIN"};var license_key=licenseKey.createLicense(userLicense)})),console.log(serial),console.log(validLicense(license_key.license))}),document.getElementById("whatsapp").innerHTML=whatsapp;let button=document.getElementById("update");button&&button.addEventListener("click",(function(){macaddress.one((function(err,mac){let getSerial=document.getElementById("serial").value.trim(),getLicense=document.getElementById("license_key").value.trim(),UniqMachineId,userInfo,userLicense={info:{code:config.code+mac.replaceAll(":","").substr(0,8).toUpperCase(),serial:getSerial},prodCode:"LEN100120",osType:"WIN"},license_key=licenseKey.createLicense(userLicense);document.getElementById("status").text="Berhasil",console.log("LISENSI"),console.log(getSerial),console.log("Valid : "+validLicense(license_key.license)),console.log("GET : "+getLicense),validLicense(license_key.license)==getLicense?(document.getElementById("status").innerHTML="Aktivasi Berhasil!",document.getElementById("status").style.background="green",document.getElementById("status").style.display="block",store.set("license_serial",getSerial),store.set("license_key",getLicense),store.set("license_status","active"),document.getElementById("restart").style.display="block"):(document.getElementById("status").innerHTML="Aktivasi Gagal!",document.getElementById("status").style.background="red",document.getElementById("status").style.display="block")}))}));